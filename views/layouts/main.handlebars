<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Toughts</title>

    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />

    <link rel="stylesheet" href="/css/style.css" />

    {{! Bootstrap Icons (usado para as setas de ordenação, etc.) }}
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
  </head>

  <body>
    <nav id="navbar">
      <a href="/" id="logo">
        <img src="/img/toughts_logo.png" alt="Toughts" />
      </a>
      <ul>
        <li><a href="/">Pensamentos</a></li>

        {{! --- Lógica de Navegação Condicional --- }}
        {{! A variável 'session' é disponibilizada globalmente pelo middleware no index.js }}
        {{#if session.userid}}
          <li><a href="/toughts/dashboard">Dashboard</a></li>
          <li><a href="/logout">Sair</a></li>
        {{else}}
          <li><a href="/login">Entrar</a></li>
          <li><a href="/register">Registrar</a></li>
        {{/if}}
      </ul>
    </nav>

    <div class="container">

      {{! --- Bloco de Mensagens Flash --- }}
      {{! Exibe mensagens de sucesso/erro (ex: "Pensamento criado!") }}
      {{! A variável 'messages' é injetada pelo 'express-flash' }}
      {{#if messages.message}}
        <div class="message">
          {{messages.message}}
        </div>
      {{/if}}
{{!-- 
      {{! --- PONTO DE INJEÇÃO PRINCIPAL --- }}
      {{! O '{{{body}}}' é onde o Handlebars irá renderizar }}
      {{! os outros ficheiros (ex: login.handlebars, home.handlebars). }}
      {{! As 3 chaves {{{ }}} são necessárias para renderizar o HTML
      corretamente. }}
       --}}
      {{{body}}}
    </div>

    <footer>
      <p><span>Toughts</span> &copy; 2025</p>
    </footer>
  </body>

</html>